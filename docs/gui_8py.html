<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Lab 4: src/gui.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Lab 4<span id="projectnumber">&#160;1.2</span>
   </div>
   <div id="projectbrief">multitasking proportional controllers and plotting with GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('gui_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">gui.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains code to run the GUI for the step response of the proportional controller with the motor as actuator and encoder as sensor.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a83c4f6850a987b21f1244ed3775dbf2d" id="r_a83c4f6850a987b21f1244ed3775dbf2d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83c4f6850a987b21f1244ed3775dbf2d">gui.get_data</a> (kp=DEFAULT_KP, period=DEFAULT_PERIOD)</td></tr>
<tr class="memdesc:a83c4f6850a987b21f1244ed3775dbf2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the serial port to read data from the connected Nucleo's main file.  <br /></td></tr>
<tr class="separator:a83c4f6850a987b21f1244ed3775dbf2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acabdaa1e782c91e915329f3b0c05491c" id="r_acabdaa1e782c91e915329f3b0c05491c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acabdaa1e782c91e915329f3b0c05491c">gui.plot_example</a> (plot_axes, plot_canvas, xlabel, ylabel, kp_input=DEFAULT_KP, period_input=DEFAULT_PERIOD)</td></tr>
<tr class="memdesc:acabdaa1e782c91e915329f3b0c05491c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets data from the connected Nucleo over serial.  <br /></td></tr>
<tr class="separator:acabdaa1e782c91e915329f3b0c05491c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc0524a2a64ac514eebc4242938edbf2" id="r_acc0524a2a64ac514eebc4242938edbf2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acc0524a2a64ac514eebc4242938edbf2">gui.get_kp_value_input</a> (tk_entry)</td></tr>
<tr class="memdesc:acc0524a2a64ac514eebc4242938edbf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Kp value from the field in the GUI.  <br /></td></tr>
<tr class="separator:acc0524a2a64ac514eebc4242938edbf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a039d96ec85572bdfd58ab7e0797c8" id="r_aa8a039d96ec85572bdfd58ab7e0797c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8a039d96ec85572bdfd58ab7e0797c8">gui.get_period_value_input</a> (tk_entry)</td></tr>
<tr class="memdesc:aa8a039d96ec85572bdfd58ab7e0797c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the periood value form the field in the GUI.  <br /></td></tr>
<tr class="separator:aa8a039d96ec85572bdfd58ab7e0797c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a8039935081d6aa34c6f924b99cea5b" id="r_a2a8039935081d6aa34c6f924b99cea5b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a8039935081d6aa34c6f924b99cea5b">gui.tk_matplot</a> (plot_function, xlabel, ylabel, title)</td></tr>
<tr class="memdesc:a2a8039935081d6aa34c6f924b99cea5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a TK window with one embedded Matplotlib plot.  <br /></td></tr>
<tr class="separator:a2a8039935081d6aa34c6f924b99cea5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d06e0761c67bdea9d9a431d584b3447" id="r_a9d06e0761c67bdea9d9a431d584b3447"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d06e0761c67bdea9d9a431d584b3447">gui.main</a> ()</td></tr>
<tr class="memdesc:a9d06e0761c67bdea9d9a431d584b3447"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function runs when this python file is ran as a main file.  <br /></td></tr>
<tr class="separator:a9d06e0761c67bdea9d9a431d584b3447"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aef95e3649ac71c90422cde7c2db22b96" id="r_aef95e3649ac71c90422cde7c2db22b96"><td class="memItemLeft" align="right" valign="top"><a id="aef95e3649ac71c90422cde7c2db22b96" name="aef95e3649ac71c90422cde7c2db22b96"></a>
str&#160;</td><td class="memItemRight" valign="bottom"><b>gui.PORT_NAME</b> = '/dev/tty.usbmodem2055377C39472'</td></tr>
<tr class="separator:aef95e3649ac71c90422cde7c2db22b96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7deaf6004ff0389706552f463752bb" id="r_a3a7deaf6004ff0389706552f463752bb"><td class="memItemLeft" align="right" valign="top"><a id="a3a7deaf6004ff0389706552f463752bb" name="a3a7deaf6004ff0389706552f463752bb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>gui.BAUD_RATE</b> = 115200</td></tr>
<tr class="separator:a3a7deaf6004ff0389706552f463752bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc11e8605a361a7bfac89c7e9b436224" id="r_afc11e8605a361a7bfac89c7e9b436224"><td class="memItemLeft" align="right" valign="top"><a id="afc11e8605a361a7bfac89c7e9b436224" name="afc11e8605a361a7bfac89c7e9b436224"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>gui.DEFAULT_KP</b> = 0.05</td></tr>
<tr class="separator:afc11e8605a361a7bfac89c7e9b436224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0452d4323d2f1db210d18a39fd921dbb" id="r_a0452d4323d2f1db210d18a39fd921dbb"><td class="memItemLeft" align="right" valign="top"><a id="a0452d4323d2f1db210d18a39fd921dbb" name="a0452d4323d2f1db210d18a39fd921dbb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>gui.DEFAULT_PERIOD</b> = 10</td></tr>
<tr class="separator:a0452d4323d2f1db210d18a39fd921dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains code to run the GUI for the step response of the proportional controller with the motor as actuator and encoder as sensor. </p>
<p>The GUI is intended to communicate with the STM32 Nucleo L476RG board over serial port /dev/tty.usbmodem2055377C39472 at a baud rate of 115200. Data from the motor is expected to be sent to this file by printing data in CSV format as time,position. Other information read over serial is discarded. GUI also includes the feature to input the desired control gain used for the proportional controller. If no value is input, the default value of 0.05 is used. These values are included in as global variables at the top of this file for ease of use with varying configurations. Some debugging information is kept to better inform the user.</p>
<dl class="section author"><dt>Author</dt><dd>Jack Krammer and Jason Chang </dd></dl>
<dl class="section date"><dt>Date</dt><dd>27-Feb-2024 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2024 by mecha04 and released under MIT License </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a83c4f6850a987b21f1244ed3775dbf2d" name="a83c4f6850a987b21f1244ed3775dbf2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83c4f6850a987b21f1244ed3775dbf2d">&#9670;&#160;</a></span>get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gui.get_data </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>kp</em><span class="paramdefsep"> = </span><span class="paramdefval">DEFAULT_KP</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>period</em><span class="paramdefsep"> = </span><span class="paramdefval">DEFAULT_PERIOD</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the serial port to read data from the connected Nucleo's main file. </p>
<p>First, ends the current main function and reboots the Nucleo. From here, reads the xdata,ydata pairs until the terminating string is read. Lines of information that is not in the proper format, or isn't data is discarded. Lastly, this function returns the x and y data as a tuple (x_data_array, y_data_array). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kp</td><td>-&gt; A positive nonzero number (integer or float) to use as the kp value for the step response. Defaults to 0.05 if no input in the entry box. </td></tr>
    <tr><td class="paramname">period</td><td>-&gt; The period of the task to run (integer) in milliseconds. Defaults to 10 if no input in the entry box. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A tuple of the x data array and y data array in the format (x_data_array, y_data_array). </dd></dl>

</div>
</div>
<a id="acc0524a2a64ac514eebc4242938edbf2" name="acc0524a2a64ac514eebc4242938edbf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc0524a2a64ac514eebc4242938edbf2">&#9670;&#160;</a></span>get_kp_value_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gui.get_kp_value_input </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tk_entry</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the Kp value from the field in the GUI. </p>
<p>Returns the value if it is a positive nonzero number. Otherwise, returns the default Kp value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tk_entry</td><td>-&gt; A Tkinter Entry object that the .get() function is applied to to get the value in the field. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The input value if the input was a positive nonzero number. Otherwise, returns the default Kp value. </dd></dl>

</div>
</div>
<a id="aa8a039d96ec85572bdfd58ab7e0797c8" name="aa8a039d96ec85572bdfd58ab7e0797c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8a039d96ec85572bdfd58ab7e0797c8">&#9670;&#160;</a></span>get_period_value_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gui.get_period_value_input </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tk_entry</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the periood value form the field in the GUI. </p>
<p>Returns the value if it is a positive nonzero integer. Otherwise, returns the default period value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tk_entry</td><td>-&gt; A Tkinter Entry object that the .get() function is applied to in order to get the value in thte field. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The input value if the input was a positive nonzero integer. Otherwise, returns the default period value. </dd></dl>

</div>
</div>
<a id="a9d06e0761c67bdea9d9a431d584b3447" name="a9d06e0761c67bdea9d9a431d584b3447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d06e0761c67bdea9d9a431d584b3447">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gui.main </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function runs when this python file is ran as a main file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

</div>
</div>
<a id="acabdaa1e782c91e915329f3b0c05491c" name="acabdaa1e782c91e915329f3b0c05491c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acabdaa1e782c91e915329f3b0c05491c">&#9670;&#160;</a></span>plot_example()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gui.plot_example </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>plot_axes</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>plot_canvas</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>xlabel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ylabel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>kp_input</em><span class="paramdefsep"> = </span><span class="paramdefval">DEFAULT_KP</span>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>period_input</em><span class="paramdefsep"> = </span><span class="paramdefval">DEFAULT_PERIOD</span></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets data from the connected Nucleo over serial. </p>
<p>The main function in the connected Nucleo should print the data in the format xdata,ydata. All other information printed in different formats will be discarded. Then plots the data into a GUI. The data should be the step response of a a proportional controller loop when a motor is set to a certain position and the position is read from the encoder reader. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plot_axes</td><td>-&gt; The plot axes supplied by Matplotlib. </td></tr>
    <tr><td class="paramname">plot_canvas</td><td>-&gt; The plot canvas, also supplied by Matplotlib. </td></tr>
    <tr><td class="paramname">xlabel</td><td>-&gt; The label for the plot's horizontal axis. </td></tr>
    <tr><td class="paramname">ylabel</td><td>-&gt; The label for the plot's vertical axis. </td></tr>
    <tr><td class="paramname">kp_input</td><td>-&gt; A parameter to pass to the get_data() function that gets the data over serial from the connected Nucleo. </td></tr>
    <tr><td class="paramname">period_input</td><td>-&gt; A parameter to pass to the get_data() function that gets the data over serial from the connected Nucleo. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

</div>
</div>
<a id="a2a8039935081d6aa34c6f924b99cea5b" name="a2a8039935081d6aa34c6f924b99cea5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a8039935081d6aa34c6f924b99cea5b">&#9670;&#160;</a></span>tk_matplot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gui.tk_matplot </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>plot_function</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>xlabel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>ylabel</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>title</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a TK window with one embedded Matplotlib plot. </p>
<p>This function makes the window, displays it, and runs the user interface until the user closes the window. The plot function, which must have been supplied by the user, should draw the plot on the supplied plot axes and call the draw() function belonging to the plot canvas to show the plot. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">plot_function</td><td>-&gt; The function which, when run, creates a plot. </td></tr>
    <tr><td class="paramname">xlabel</td><td>-&gt; The label for the plot's horizontal axis. </td></tr>
    <tr><td class="paramname">ylabel</td><td>-&gt; The label for the plot's vertical axis. </td></tr>
    <tr><td class="paramname">title</td><td>-&gt; A title for the plot; it shows up in window title bar. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="gui_8py.html">gui.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
